<xi:include href="/usr/local/limatix-qautils/checklist/datacollect2.xsl" xpointer="xmlns(xsl=http://www.w3.org/1999/XSL/Transform) xpointer(/xsl:stylesheet/node())" />

<xsl:template xmlns="http://www.w3.org/1999/xhtml" xmlns:dir="http://thermal.cnde.iastate.edu/databrowse/dir" xmlns:dc="http://limatix.org/datacollect" xmlns:dcv="http://limatix.org/dcvalue" xmlns:chx="http://limatix.org/checklist" xmlns:xlink="http://www.w3.org/1999/xlink" match="dir:dir" mode="title">
	<xsl:element name="script">
		<xsl:attribute name="type">text/javascript</xsl:attribute>
		<xsl:attribute name="src"><xsl:value-of select="@resurl"/>/threejs/x_ite/x_ite.js</xsl:attribute>
	</xsl:element>
	<xsl:element name="link">
		<xsl:attribute name="rel">stylesheet</xsl:attribute>
		<xsl:attribute name="type">text/css</xsl:attribute>
		<xsl:attribute name="href"><xsl:value-of select="@resurl"/>/threejs/x_ite/x_ite.css</xsl:attribute>
	</xsl:element>
	<script type="text/javascript">
		<![CDATA[
			var curid = 0;

			function loaddetails(id) {
				hidedetails();
				curid = id;
				spec_details = document.getElementsByName(curid);
                $.each(spec_details, function( index, value ) {
                    value.style.display = "";
                });
			}
			function hidedetails () {
				spec_details = document.getElementsByName(curid);
                $.each(spec_details, function( index, value ) {
                    value.style.display = "none";
                });
			}
		]]>
	</script>
	<div id="specimenmenu">
		<h3>Select a Specimen</h3>
		<xsl:for-each select="//dc:specimen[not(preceding::dc:specimen/text() = text())]">
			<a>
				<xsl:attribute name="onclick">loaddetails('<xsl:value-of select="text()"/>')</xsl:attribute>
				<xsl:value-of select="text()"/>
			</a>
			<br/>
		</xsl:for-each>
	</div>
	<!--<xsl:for-each select="//dc:config/dc:configfile">-->
		<!--<div style="display:none;">-->
			<!--<xsl:attribute name="name"><xsl:value-of select="dc:specimen"/></xsl:attribute>-->
			<!--<xsl:call-template name="config"/>-->
		<!--</div>-->
	<!--</xsl:for-each>-->
	<!--<xsl:for-each select="//dc:experiment">-->
		<!--<div style="display:none;">-->
			<!--<xsl:attribute name="name"><xsl:value-of select="dc:specimen"/></xsl:attribute>-->
			<!--<xsl:call-template name="specimen"/>-->
		<!--</div>-->
	<!--</xsl:for-each>-->
	<xsl:for-each select="//dc:fusion">
		<div style="display:none;">
			<xsl:attribute name="name"><xsl:value-of select="dc:specimen"/></xsl:attribute>
			<xsl:call-template name="fusion"/>
		</div>
	</xsl:for-each>
	<xsl:for-each select="//dc:measurement">
		<div style="display:none;">
			<xsl:attribute name="name"><xsl:value-of select="dc:specimen"/></xsl:attribute>
			<xsl:call-template name="specimen"/>
		</div>
	</xsl:for-each>
</xsl:template>
<xsl:template xmlns="http://www.w3.org/1999/xhtml" xmlns:html="http://www.w3.org/1999/xhtml" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:dc="http://limatix.org/datacollect" xmlns:xlink="http://www.w3.org/1999/xlink" match="dc:fusion" name="fusion" mode="full">
	<h3>Fusion</h3>
	<X3DCanvas style="width: 700px; height: 432px;">
		<xsl:attribute name="src"><xsl:value-of select="dc:greensinversion_3d"/></xsl:attribute>
		<p>Your browser may not support all features required by X_ITE. For a better experience, keep your browser up to date.</p>
	</X3DCanvas>
</xsl:template>
<xsl:template xmlns="http://www.w3.org/1999/xhtml" xmlns:html="http://www.w3.org/1999/xhtml" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:dc="http://limatix.org/datacollect" xmlns:xlink="http://www.w3.org/1999/xlink" match="dc:measurement" name="specimen" mode="full">
	<h3>Measurement Summary</h3>
	<table class="cream full-width">
	        <thead>
	            <tr><th style="width:166px">Item</th><th>Value</th></tr>
	        </thead>
	        <tbody>
	            <xsl:apply-templates select="dc:*" />
	        </tbody>
	    </table>
</xsl:template>
<xsl:template xmlns="http://www.w3.org/1999/xhtml" xmlns:html="http://www.w3.org/1999/xhtml" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:dc="http://thermal.cnde.iastate.edu/datacollect" xmlns:xlink="http://www.w3.org/1999/xlink" match="dc:config/dc:configfile" name="config" mode="full">
    <h3>Configuration</h3>
            <xsl:choose>
                <xsl:when test="@xlink:href and @url">
                    <a><xsl:attribute name="href"><xsl:value-of select="@url"/></xsl:attribute>
                    <tt><xsl:value-of select="@xlink:href"/></tt></a>
                </xsl:when>
                <xsl:otherwise>
                    <tt><xsl:value-of select="@xlink:href"/></tt>
                </xsl:otherwise>
            </xsl:choose>
        <pre class="prettyprint" style="height:300px">
            <xsl:value-of select="."/>
        </pre>
</xsl:template>
